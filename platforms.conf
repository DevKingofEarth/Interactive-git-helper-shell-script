# ~/.config/repo-crafter/platforms.conf
# Platform-specific logic is DEFINED HERE, not in code.

[github]
enabled = true
api_base = https://api.github.com
ssh_host = github.com
repo_domain = github.com
token_var = GITHUB_API_TOKEN
auth_header = token {token}  # GitHub uses "token" prefix
#auth_header_overrides = {"gists":"Bearer {token}"}  # Some endpoints need Bearer
# --- API Endpoint Patterns ---
repo_check_endpoint = /repos/{owner}/{repo}
repo_check_method = GET
# How to interpret the API response
repo_check_success_key = id
repo_create_endpoint = /user/repos
repo_create_method = POST
repo_list_endpoint = /user/repos?per_page=100&sort=updated
repo_list_success_key = .[0].id  # First repo has id field
#extras
work_dir = github.com
display_format = {name} ({visibility}) - git@{ssh_host}:{path}.git
payload_template = {"name":"{repo}","private":{private},"visibility":"{visibility}"}
ssh_url_template = git@{ssh_host}:{owner}/{repo}.git

[gitlab]
enabled = true
api_base = https://gitlab.com/api/v4
ssh_host = gitlab.com
repo_domain = gitlab.com
token_var = GITLAB_API_TOKEN
auth_header = token {token}  # GitHub uses "token" prefix
# --- API Endpoint Patterns ---
repo_check_endpoint = /projects/{owner}%2F{repo}
repo_check_method = GET
repo_check_success_key = id
repo_create_endpoint = /projects
repo_create_method = POST
repo_list_endpoint = /projects?membership=true&per_page=100&order_by=updated_at
repo_list_success_key = .[0].id
#extras
work_dir = gitlab.com
display_format = {name} ({visibility}) - git@{ssh_host}:{path}.git
payload_template = {"name":"{repo}","private":{private},"visibility":"{visibility}"}
ssh_url_template = git@{ssh_host}:{owner}/{repo}.git

[multi]
work_dir = Multi-server
